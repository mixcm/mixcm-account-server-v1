function sso_mixcm(b,a,c){$.ajax({type:"POST",url:b,data:{username:a,c:c},success:function(a){console.log(a);window.location.href=""!=document.referrer?document.referrer:"/setting/home"},xhrFields:{withCredentials:!0},crossDomain:!0})}
function getAvatar(){$.ajax({type:"POST",url:"/ajax/sign_name",data:{uid:$("input[name='uid']").val()},success:function(b){b=JSON.parse(b);1==b.state?($("img").attr("src",b.avatar),$(".mixcm-bk").css("background-image","url("+b.background+")")):($("img").attr("src","https://cdn.chainwon.com/img/sign.png"),$(".mixcm-bk").css("background-image",""))}})}$("input[name='uid']").blur(function(){getAvatar()});getAvatar();
$("button[name='signin']").click(function(){var b=$(this).html();$("button").prop("disabled",!0);$("button").html('<div class="mdui-spinner"></div>');mdui.mutation();$.ajax({type:"POST",url:"/ajax/signin",data:$("form").serialize(),success:function(a){a=JSON.parse(a);mdui.snackbar({message:a.notice,position:"right-bottom"});1==a.state&&(sso_mixcm("https://account.mixcm.com/ajax/sso",a.username,a.c),sso_mixcm("https://www.chainwon.com/ajax/sso",a.username,a.c));$("button").prop("disabled",!1);$("button").html(b)}})});
$("button[name='signup']").click(function(){var b=$(this).html();$("button").prop("disabled",!0);$("button").html('<div class="mdui-spinner"></div>');mdui.mutation();$.ajax({type:"POST",url:"/ajax/signup",data:$("form").serialize(),success:function(a){a=JSON.parse(a);mdui.snackbar({message:a.notice,position:"right-bottom"});1==a.state&&(sso_mixcm("https://account.mixcm.com/ajax/sso",a.username,a.c),sso_mixcm("https://www.chainwon.com/ajax/sso",a.username,a.c));$("button").prop("disabled",!1);$("button").html(b)}})});
function alert(b){mdui.alert(b)};